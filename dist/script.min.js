function OrderCloudSDKBuyerXP(e){e.decorator("OrderCloudSDK",["$delegate","bachBuyerXp","$q",function(e,r,t){return e.Buyers.Get=function(){var t=e.GetToken();return r.Get(t)},e.Buyers.List=function(){return e.Buyers.Get().then(function(e){return{Items:[e],Meta:{Page:1,PageSize:1,TotalPages:1,TotalCount:1,ItemRange:[1,1]}}})},e.Buyers.Update=function(){var n=[].slice.call(arguments)[1],a=e.GetToken();return n&&n.xp?r.Update(a,n.xp):t.reject("Missing body")},e.Buyers.Patch=function(){var n=[].slice.call(arguments)[1],a=e.GetToken();return n?r.Patch(a,n):t.reject("Missing body")},e}])}function bachBuyerXpService(e,r,t,n){function a(n){function a(){var e=t(function(){i&&(t.cancel(e),o.resolve(i))},100)}var o=e.defer();return i?o.resolve(i):d?a():(d=!0,r.get(u,{headers:{"oc-token":n}}).then(function(e){i={xp:e.data},o.resolve(i)}).catch(function(e){o.reject(e)})),o.promise}function o(e,t){return r.put(u,t,{headers:{"oc-token":e}})}function c(e,t){return r.patch(u,e,{headers:{"oc-token":t}})}var u=n+"/buyerxp",i=null,d=!1,s={Get:a,Update:o,Patch:c};return s}function bachGiftCards(e,r,t,n,a,o){function c(e){return h().create(e).$promise}function u(e){return e.body||e.body.id?h().update({id:e.body.id},e.body).$promise:a.error("id is a required parameter")}function i(e){return h().delete({id:e.id}).$promise}function d(e){return h().list(e&&e.searchTerm?{searchTerm:e.searchTerm}:null).$promise.then(function(e){return e.list})}function s(r){return o.post(e+"/giftcards/purchase/"+r.orderid,{},{headers:{"oc-token":l()}})}function h(){var t={create:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"},list:{method:"GET"}};return _.each(t,function(e){e.headers={"oc-token":l()}}),r(e+"/giftcards/:id",{},t)}function l(){var e=n.Watch().replace(/ /g,"_").toLowerCase(),r=e+".token";return t.get(r)}var f={Create:c,Update:u,Delete:i,List:d,Purchase:s};return f}angular.module("bachmans-common",[]),angular.module("bachmans-common").config(OrderCloudSDKBuyerXP),OrderCloudSDKBuyerXP.$inject=["$provide"],angular.module("bachmans-common").factory("bachBuyerXp",bachBuyerXpService),bachBuyerXpService.$inject=["$q","$http","$interval","nodeapiurl"],angular.module("bachmans-common").factory("bachGiftCards",bachGiftCards),bachGiftCards.$inject=["nodeapiurl","$resource","$cookies","ocAppName","toastr","$http"];