function OrderCloudSDKAnonAdditions(e){e.decorator("OrderCloudSDK",["$delegate","$cookies","ocAppName",function(e,r,n){var o=n.Watch().replace(/ /g,"_").toLowerCase(),t=o+"anonymous.token",u=o+"impersonate.token";e.GetAnonToken=function(){return r.get(t)},e.SetAnonToken=function(e){r.put(t,e)},e.GetImpersonationToken=function(){return r.get(u)},e.SetImpersonationToken=function(e){r.put(u,e)};var c=e.As;return e.As=function(){var r=e.GetImpersonationToken();return c(r)},e.AsAnon=function(){var r=e.GetAnonToken();return c(r)},e.AsAdmin=function(){var r=e.GetToken();return c(r)},e}])}function OrderCloudSDKBuyerXP(e){e.decorator("OrderCloudSDK",["$delegate","ocBuyerXp","$q",function(e,r,n){return e.Buyers.Get=function(){var n=e.GetToken();return r.Get(n)},e.Buyers.Update=function(){var o=[].slice.call(arguments)[1],t=e.GetToken();return o&&o.xp?r.Update(t,o.xp):n.reject("Missing body")},e.Buyers.Patch=function(){var o=[].slice.call(arguments)[1],t=e.GetToken();return o?r.Patch(t,o):n.reject("Missing body")},e}])}function ocBuyerXpService(e,r,n,o){function t(o){function t(){var e=n(function(){i&&(n.cancel(e),u.resolve(i))},100)}var u=e.defer();return i?u.resolve(i):d?t():(d=!0,r.get(a,{headers:{"oc-token":o}}).then(function(e){i={xp:e.data},u.resolve(i)}).catch(function(e){u.reject(e)})),u.promise}function u(e,n){return r.put(a,n,{headers:{"oc-token":e}})}function c(e,n){return r.patch(a,e,{headers:{"oc-token":n}})}var a=o+"/buyerxp",i=null,d=!1,s={Get:t,Update:u,Patch:c};return s}function ocGiftCards(e,r,n,o,t){function u(e){return d().create(e).$promise}function c(e){return e.body||e.body.id?d().update({id:e.body.id},e.body).$promise:t.error("id is a required parameter")}function a(e){return d().delete({id:e.id}).$promise}function i(e){return d().list(e&&e.searchTerm?{searchTerm:e.searchTerm}:null).$promise.then(function(e){return e.list})}function d(){var n={create:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE"},list:{method:"GET"}};return _.each(n,function(e){e.headers={"oc-token":s()}}),r(e+"/giftcards/:id",{},n)}function s(){var e=o.Watch().replace(/ /g,"_").toLowerCase(),r=e+".token";return n.get(r)}var l={Create:u,Update:c,Delete:a,List:i};return l}angular.module("bachmans-common",[]),angular.module("orderCloud").config(OrderCloudSDKAnonAdditions),OrderCloudSDKAnonAdditions.$inject=["$provide"],angular.module("bachmans-common").config(OrderCloudSDKBuyerXP),OrderCloudSDKBuyerXP.$inject=["$provide"],angular.module("orderCloud").factory("ocBuyerXp",ocBuyerXpService),ocBuyerXpService.$inject=["$q","$http","$interval","nodeapiurl"],angular.module("orderCloud").factory("ocGiftCards",ocGiftCards),ocGiftCards.$inject=["nodeapiurl","$resource","$cookies","ocAppName","toastr"];